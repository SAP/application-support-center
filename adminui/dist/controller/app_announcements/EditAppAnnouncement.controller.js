sap.ui.define(["../BaseController"],function(n){var t;return n.extend("asc.admin.controller.app_announcements.EditAppAnnouncement",{onInit:function(){var n=this;this.oRouter=this.getOwnerComponent().getRouter();this.oRouter.getRoute("editappannouncement").attachPatternMatched(this._onAnnouncementMatched,this);sap.ui.require(["sap/ui/richtexteditor/RichTextEditor","sap/ui/richtexteditor/EditorType"],function(e,i){t=new e("idEditAppAnnouncementRichDescription",{editorType:i.TinyMCE4,width:"90%",height:"300px",customToolbar:true,showGroupFont:false,showGroupLink:true,showGroupInsert:false,value:"",ready:function(){this.setValue(n._app_announcement_detail.description);this.addButtonGroup("styleselect").addButtonGroup("table");this.addStyleClass("formattedTextPadding")}});n.getView().byId("idVerticalLayout").addContent(t)})},_onAnnouncementMatched:function(n){this._app_announcement=n.getParameter("arguments").app_announcement||this._app_announcement||"0";this._app=n.getParameter("arguments").app||this._app||"0";this.getView().bindElement({path:"/"+this._app_announcement,model:"app_announcements"});this._app_announcement_detail=this.getView().getModel("app_announcements").oData[this._app_announcement];if(t!==undefined){t.setValue(this._app_announcement_detail.description)}},onCancelPress:function(){this.oRouter.navTo("editapp",{app:this._app})},onSavePress:function(n){this._app_announcement_detail.description=t.getValue();this.api.putAppAnnouncement(this._app_announcement_detail.app_id,this._app_announcement_detail.announcement_id,this._app_announcement_detail).done(this.onEditAnnouncementDone.bind(this)).fail(this.onHTTPFail.bind(this))},onEditAnnouncementDone:function(n){this.onToast("Success!");this.oRouter.navTo("editapp",{app:this._app})}})},true);