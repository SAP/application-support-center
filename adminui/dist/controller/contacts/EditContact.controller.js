sap.ui.define(["../BaseController"],function(t){return t.extend("asc.admin.controller.contacts.EditContact",{onInit:function(){this.oRouter=this.getOwnerComponent().getRouter();this.oRouter.getRoute("editcontact").attachPatternMatched(this._onContactMatched,this)},_onContactMatched:function(t){this._contact=t.getParameter("arguments").contact||this._contact||"0";this.getView().bindElement({path:"/"+this._contact,model:"contacts"});this.contactDetail=this.getView().getModel("contacts").oData[this._contact];if(this.contactdetail&&this.contactdetail.contact_id){this.api.getContactApps(this.contactdetail.contact_id).done(this.onGetContactAppsDone.bind(this)).fail(this.onHTTPFail.bind(this))}},onCancelPress:function(){this.oRouter.navTo("viewcontacts")},onAppItemPress:function(t){var n=t.getSource().getBindingContext("contacts_apps").getPath();var o=n.split("/").slice(-1).pop();this.oRouter.navTo("viewapp",{app:o})},onSavePress:function(t){this.api.putContact(this.contactdetail.contact_id,this.contactdetail).done(this.onEditContactDone.bind(this)).fail(this.onHTTPFail.bind(this))},onEditContactDone:function(t){this.onToast("Success!");this.oRouter.navTo("viewcontacts")},onGetContactAppsDone:function(t){var n=new sap.ui.model.json.JSONModel(t);this.getView().setModel(n,"contacts_apps")}})},true);