sap.ui.define(["../BaseController"],function(t){return t.extend("asc.admin.controller.admin.Admin",{onInit:function(){this.oRouter=this.getOwnerComponent().getRouter();this.api.getAllSettings().done(this.onGetSettingsDone.bind(this))},onAddNotificationPress:function(t){this.oRouter.navTo("addadminnotification")},onNotificationItemPress:function(t){var e=t.getSource().getBindingContext("notifications").getPath();var i=e.split("/").slice(-1).pop();this.oRouter.navTo("editadminnotification",{notification_id:i})},onAddSettingPress:function(t){this.oRouter.navTo("addadminsetting")},onSettingItemPress:function(t){var e=t.getSource().getBindingContext("raw_settings").getPath();var i=e.split("/").slice(-1).pop();this.oRouter.navTo("editadminsetting",{setting_id:i})},onRemoveNotificationPress:function(t){var e=this.getView().byId("idTableNotifications");var i=e.getSelectedContexts();var o=this.getView().oPropagatedProperties.oModels.notifications.getData();for(var n=i.length-1;n>=0;n--){var s=i[n].getObject();var a=i[n].getPath().replace("/","");o.splice(a,1);this.getView().oPropagatedProperties.oModels.notifications.setData(o);this.api.deleteNotification(s.notification_id).done(this.onRemoveNotificationDone.bind(this)).fail(this.onHTTPFail.bind(this))}e.removeSelections()},onRemoveSettingPress:function(t){var e=this.getView().byId("idTableOptions");var i=e.getSelectedContexts();var o=this.getView().oPropagatedProperties.oModels.raw_settings.getData();for(var n=i.length-1;n>=0;n--){var s=i[n].getObject();var a=i[n].getPath().replace("/","");o.splice(a,1);this.getView().oPropagatedProperties.oModels.raw_settings.setData(o);this.api.deleteSetting(s.setting_id).done(this.onRemoveOptionDone.bind(this)).fail(this.onHTTPFail.bind(this))}e.removeSelections()},onRemoveNotificationDone:function(t){this.onToast("Success!")},onRemoveOptionDone:function(t){this.onToast("Success!")},onGetSettingsDone:function(t){var e=new sap.ui.model.json.JSONModel(t);e.setSizeLimit(1e3);this.getOwnerComponent().setModel(e,"raw_settings")}})},true);