sap.ui.define(["sap/ui/test/Opa5","sap/ui/test/actions/Press","sap/ui/test/actions/EnterText","sap/ui/test/matchers/AggregationLengthEquals","sap/ui/test/matchers/AggregationFilled","sap/ui/test/matchers/PropertyStrictEquals","../Common"],function(e,t,i,s,n,r,a){"use strict";var o="app.AppList",c="*#-Q@@||";e.createPageObjects({onTheAppListPage:{baseClass:a,pageName:o,actions:{getPageName:function(){return o},iWaitUntilTheListIsLoaded:function(){return this.waitFor({id:"idTableApps",viewName:o,matchers:new n({name:"items"}),errorMessage:"The app list has not been loaded"})},iRememberTheSelectedItem:function(){return this.waitFor({id:"idTableApps",viewName:o,matchers:function(e){return e.getSelectedItem()},success:function(e){this.iRememberTheListItem(e)},errorMessage:"The list does not have a selected item so nothing can be remembered"})},iRememberTheIdOfListItemAtPosition:function(e){return this.waitFor({id:"idTableApps",viewName:o,matchers:function(t){return t.getItems()[e]},success:function(e){this.iRememberTheListItem(e)},errorMessage:"The list does not have an item at the index "+e})},iSearchFor:function(e){return this.waitFor({id:"idTableApps",viewName:o,matchers:new n({name:"items"}),success:function(){return this.iSearchForValue(new i({text:e}),new t)},errorMessage:"Did not find list items while trying to search for "+e})},iTypeSomethingInTheSearchThatCannotBeFoundAndTriggerRefresh:function(){return this.iSearchForValue(function(e){e.setValue(c);e.fireSearch({refreshButtonPressed:true})})},iSearchForValue:function(e){return this.waitFor({id:"idSearchField",viewName:o,actions:e,errorMessage:"Failed to find search field in Master view.'"})},iClearTheSearch:function(){var e=function(e){e.clear()};return this.iSearchForValue([e])},iSearchForSomethingWithNoResults:function(){return this.iSearchForValue([new i({text:c}),new t])},iRememberTheListItem:function(e){var t=e.getBindingContext();this.getContext().currentItem={bindingPath:t.getPath(),id:t.getProperty("app_id"),title:t.getProperty("app_id")}},iFilterTheListOn:function(e){return this.iMakeASelection("filterButton","apps",e)},iMakeASelection:function(e,i,s){return this.waitFor({id:e,viewName:o,actions:new t,success:function(){this.waitFor({controlType:"sap.m.StandardListItem",matchers:new r({name:"title",value:i}),searchOpenDialogs:true,actions:new t,success:function(){this.waitFor({controlType:"sap.m.StandardListItem",matchers:new r({name:"title",value:s}),searchOpenDialogs:true,actions:new t,success:function(){this.waitFor({controlType:"sap.m.Button",matchers:new r({name:"text",value:"OK"}),searchOpenDialogs:true,actions:new t,errorMessage:"The ok button in the dialog was not found and could not be pressed"})},errorMessage:"Did not find the"+s+"in"+i})},errorMessage:"Did not find the "+i+" element in select"})},errorMessage:"Did not find the "+e+" select"})},iPressAddNewApplication:function(){return this.waitFor({id:"idButtonAddNewApplication",viewName:o,actions:new t,errorMessage:"Did not find the add new application button on the view "+o})}},assertions:{theListShowsOnlyObjectsWithTheSearchString:function(t){this.waitFor({id:"idTableApps",viewName:o,matchers:new n({name:"items"}),check:function(e){var i=e.getItems().every(function(e){return e.getAttributes()[0].getText().indexOf(t)!==-1});return i},success:function(){e.assert.ok(true,"Every item did contain the title")},errorMessage:"The list did not have items"})},theListShouldHaveAllEntries:function(){var t,i;this.waitFor(this.createAWaitForAnEntitySet({entitySet:"apps",success:function(e){t=e}}));return this.waitFor({id:"idTableApps",viewName:o,matchers:function(e){i=Math.min(e.getGrowingThreshold(),t.length);return new s({name:"items",length:i}).isMatching(e)},success:function(t){e.assert.strictEqual(t.getItems().length,i,"The growing list displays all items")},errorMessage:"List does not display all entries."})},iShouldSeeTheNoDataTextForNoSearchResults:function(){return this.waitFor({id:"idTableApps",viewName:o,success:function(t){e.assert.strictEqual(t.getNoDataText(),"No data","the list should show the no data text for search and filter")},errorMessage:"list does not show the no data text for search and filter"})},theHeaderShouldDisplayAllEntries:function(){return this.waitFor({id:"idTableApps",viewName:o,success:function(t){var i=t.getBinding("items").getLength();this.waitFor({id:"masterHeaderTitle",viewName:o,matchers:new r({name:"text",value:"Orders ("+i+")"}),success:function(){e.assert.ok(true,"The master page header displays "+i+" items")},errorMessage:"The  master page header does not display "+i+" items."})},errorMessage:"Header does not display the number of items in the list"})},theListShouldHaveNoSelection:function(){return this.waitFor({id:"idTableApps",viewName:o,matchers:function(e){return!e.getSelectedItem()},success:function(t){e.assert.strictEqual(t.getSelectedItems().length,0,"The list selection is removed")},errorMessage:"List selection was not removed"})},theRememberedListItemShouldBeSelected:function(){this.waitFor({id:"idTableApps",viewName:o,matchers:function(e){return e.getSelectedItem()},success:function(t){e.assert.strictEqual(t.getTitle(),"Order "+this.getContext().currentItem.title,"The list selection is incorrect")},errorMessage:"The list has no selection"})}}}})});